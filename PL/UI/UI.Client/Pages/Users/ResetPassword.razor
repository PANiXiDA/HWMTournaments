@page "/reset-password"

<main class="reset-page">
    @if (IsLoading)
    {
        <div class="state loading">
            <div class="spinner" aria-hidden="true"></div>
            <div class="title">Готовим форму…</div>
            <div class="subtitle">Пожалуйста, подождите.</div>
        </div>
    }
    else if (IsSuccess)
    {
        <div class="state success">
            <div class="glyph" aria-hidden="true">
                <svg class="check" viewBox="0 0 48 28" role="img" aria-label="Успех">
                    <path d="M12 24.5 L21 33.5 L36 14.5" fill="none" />
                </svg>
            </div>
            <div class="title">Пароль обновлён</div>
            <div class="subtitle">
                Для <strong class="accent">@Email</strong> установлен новый пароль.
            </div>
        </div>
    }
    else
    {
        <div class="state form">
            <div class="title">Сброс пароля</div>
            <div class="subtitle">
                Установите новый пароль для <strong class="accent">@Email</strong>.
            </div>

            <EditForm Model="@Model" OnValidSubmit="SubmitAsync" class="form-container">
                <DataAnnotationsValidator />
                <ValidationSummary class="validation-summary" />

                <div class="form-group">
                    <label class="form-label" for="newpass">Новый пароль</label>
                    <InputText id="newpass" type="password" class="form-input" @bind-Value="Model.NewPassword" />
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn primary" disabled="@IsSubmitting">
                        @((IsSubmitting ? "Отправляем…" : "Сменить пароль"))
                    </button>
                </div>
            </EditForm>
        </div>
    }
</main>
